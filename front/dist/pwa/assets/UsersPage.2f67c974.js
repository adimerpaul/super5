import{B as x,C,E as a,H as s,S as n,aM as d,aF as c,J as u,K as r,R as f,G as h,U as y,I as m,V as Q}from"./index.9edba5f1.js";import{Q as V,a as t}from"./QTable.11f5663d.js";import{Q as _}from"./QTr.2e0db411.js";import{Q as w}from"./QSpace.4e595e69.js";import{Q as k}from"./QForm.6c489b8e.js";import{Q as q}from"./QPage.8e64ec2d.js";import{C as b}from"./ClosePopup.f357f1c9.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.7302da53.js";import"./QSelect.c18c5acd.js";import"./QMenu.037e31f1.js";import"./QItem.eff87168.js";import"./selection.83a0f183.js";import"./format.2cae61da.js";import"./use-fullscreen.f8a2fd6b.js";const v={name:"CategoryPage",data(){return{search:"",columns:[{name:"option",label:"Opciones",align:"center",field:l=>l.id},{name:"id",label:"ID",align:"center",field:l=>l.id},{name:"name",label:"Nombre",align:"left",field:l=>l.name},{name:"icon",label:"Icono",align:"left",field:l=>l.icon}],users:[],user:{},dialog:!1,loading:!1}},mounted(){this.loading=!0,this.$axios.get("users").then(l=>{this.users=l.data}).finally(()=>{this.loading=!1})},methods:{storeCategory(){console.log(this.user),this.loading=!0,this.$axios.post("users",this.user).then(l=>{this.users.push(l.data),this.dialog=!1}).finally(()=>{this.loading=!1})},updateCategory(){console.log(this.user),this.loading=!0,this.$axios.put(`users/${this.user.id}`,this.user).then(l=>{const i=this.users.findIndex(p=>p.id===l.data.id);this.users.splice(i,1,l.data),this.dialog=!1}).finally(()=>{this.loading=!1})},createCategory(){this.dialog=!0,this.user={name:"",icon:""}},editCategory(l){this.dialog=!0,this.user={...l}},deleteCategory(l){this.$alert.confirm("\xBFEst\xE1s seguro de eliminar esta usuario?").onOk(()=>{this.loading=!0,this.$axios.delete(`users/${l.id}`).then(()=>{this.users=this.users.filter(i=>i.id!==l.id)}).finally(()=>{this.loading=!1})})}}},B={class:"text-right"};function U(l,i,p,E,o,g){return x(),C(q,{class:"q-pa-xs bg-grey-3"},{default:a(()=>[s(f,{class:"q-pa-xs"},{default:a(()=>[s(n,null,{default:a(()=>[s(V,{rows:o.users,dense:"","rows-per-page-options":[0],columns:o.columns,filter:o.search,loading:o.loading},{"top-right":a(()=>[s(d,{modelValue:o.search,"onUpdate:modelValue":i[0]||(i[0]=e=>o.search=e),dense:"",debounce:"300",placeholder:"Buscar...",outlined:""},{append:a(()=>[s(c,{name:"search"})]),_:1},8,["modelValue"])]),body:a(e=>[s(_,{props:e},{default:a(()=>[s(t,{props:e,"auto-width":"",key:"option",style:{padding:"0",margin:"0"}},null,8,["props"]),s(t,{props:e,key:"id"},{default:a(()=>[u(r(e.row.id),1)]),_:2},1032,["props"]),s(t,{props:e,key:"name"},{default:a(()=>[u(r(e.row.name),1)]),_:2},1032,["props"]),s(t,{props:e,key:"icon"},{default:a(()=>[s(c,{name:e.row.icon,size:"15px",color:"primary"},null,8,["name"]),u(" "+r(e.row.icon),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1}),s(Q,{modelValue:o.dialog,"onUpdate:modelValue":i[4]||(i[4]=e=>o.dialog=e),persistent:""},{default:a(()=>[s(f,{style:{width:"300px","max-width":"90vw"}},{default:a(()=>[s(n,{class:"row items-center q-pb-none"},{default:a(()=>[h("div",null,r(o.user.id?"Editar":"Crear")+" usuario ",1),s(w),y(s(m,{flat:"",dense:"",icon:"close"},null,512),[[b]])]),_:1}),s(n,{class:"q-pt-none"},{default:a(()=>[s(k,{onSubmit:i[3]||(i[3]=e=>o.user.id===void 0?g.storeCategory():g.updateCategory())},{default:a(()=>[s(d,{modelValue:o.user.name,"onUpdate:modelValue":i[1]||(i[1]=e=>o.user.name=e),label:"Nombre",outlined:"",dense:"",rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),s(d,{modelValue:o.user.icon,"onUpdate:modelValue":i[2]||(i[2]=e=>o.user.icon=e),label:"Icono",outlined:"",dense:"",rules:[e=>!!e||"Este campo es requerido"]},null,8,["modelValue","rules"]),h("div",B,[y(s(m,{label:"Cancelar",color:"grey-3","text-color":"black","no-caps":"",loading:o.loading},null,8,["loading"]),[[b]]),s(m,{label:o.user.id?"Actualizar":"Crear",color:"primary",class:"q-ml-md",type:"submit","no-caps":"",loading:o.loading},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var j=I(v,[["render",U]]);export{j as default};
