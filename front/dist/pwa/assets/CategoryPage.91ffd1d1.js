import{B as x,C as _,E as t,H as e,S as c,I as r,aM as g,aF as p,J as u,K as n,R as f,G as y,U as h,V as Q}from"./index.9edba5f1.js";import{Q as w,a as d}from"./QTable.11f5663d.js";import{Q as V}from"./QTr.2e0db411.js";import{Q as k}from"./QSpace.4e595e69.js";import{Q as v}from"./QForm.6c489b8e.js";import{Q as q}from"./QPage.8e64ec2d.js";import{C}from"./ClosePopup.f357f1c9.js";import{_ as I}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.7302da53.js";import"./QSelect.c18c5acd.js";import"./QMenu.037e31f1.js";import"./QItem.eff87168.js";import"./selection.83a0f183.js";import"./format.2cae61da.js";import"./use-fullscreen.f8a2fd6b.js";const B={name:"CategoryPage",data(){return{search:"",columns:[{name:"option",label:"Opciones",align:"center",field:a=>a.id},{name:"id",label:"ID",align:"center",field:a=>a.id},{name:"name",label:"Nombre",align:"left",field:a=>a.name},{name:"icon",label:"Icono",align:"left",field:a=>a.icon}],categories:[],category:{},dialog:!1,loading:!1}},mounted(){this.loading=!0,this.$axios.get("categories").then(a=>{this.categories=a.data}).finally(()=>{this.loading=!1})},methods:{storeCategory(){console.log(this.category),this.loading=!0,this.$axios.post("categories",this.category).then(a=>{this.categories.push(a.data),this.dialog=!1}).finally(()=>{this.loading=!1})},updateCategory(){console.log(this.category),this.loading=!0,this.$axios.put(`categories/${this.category.id}`,this.category).then(a=>{const i=this.categories.findIndex(m=>m.id===a.data.id);this.categories.splice(i,1,a.data),this.dialog=!1}).finally(()=>{this.loading=!1})},createCategory(){this.dialog=!0,this.category={name:"",icon:""}},editCategory(a){this.dialog=!0,this.category={...a}},deleteCategory(a){this.$alert.confirm("\xBFEst\xE1s seguro de eliminar esta categor\xEDa?").onOk(()=>{this.loading=!0,this.$axios.delete(`categories/${a.id}`).then(()=>{this.categories=this.categories.filter(i=>i.id!==a.id)}).finally(()=>{this.loading=!1})})}}},E={class:"text-right"};function N(a,i,m,S,l,s){return x(),_(q,{class:"q-pa-xs bg-grey-3"},{default:t(()=>[e(f,{class:"q-pa-xs"},{default:t(()=>[e(c,null,{default:t(()=>[e(w,{rows:l.categories,dense:"","rows-per-page-options":[0],columns:l.columns,filter:l.search,loading:l.loading},{"top-right":t(()=>[e(r,{dense:"",icon:"add_circle_outline",color:"primary",label:"Crear","no-caps":"",loading:l.loading,onClick:s.createCategory},null,8,["loading","onClick"]),e(g,{modelValue:l.search,"onUpdate:modelValue":i[0]||(i[0]=o=>l.search=o),dense:"",debounce:"300",placeholder:"Buscar...",outlined:""},{append:t(()=>[e(p,{name:"search"})]),_:1},8,["modelValue"])]),body:t(o=>[e(V,{props:o},{default:t(()=>[e(d,{props:o,"auto-width":"",key:"option",style:{padding:"0",margin:"0"}},{default:t(()=>[e(r,{flat:"",dense:"",icon:"edit",onClick:b=>s.editCategory(o.row),size:"10px"},null,8,["onClick"]),e(r,{flat:"",dense:"",icon:"delete",onClick:b=>s.deleteCategory(o.row),size:"10px"},null,8,["onClick"])]),_:2},1032,["props"]),e(d,{props:o,key:"id"},{default:t(()=>[u(n(o.row.id),1)]),_:2},1032,["props"]),e(d,{props:o,key:"name"},{default:t(()=>[u(n(o.row.name),1)]),_:2},1032,["props"]),e(d,{props:o,key:"icon"},{default:t(()=>[e(p,{name:o.row.icon,size:"15px",color:"primary"},null,8,["name"]),u(" "+n(o.row.icon),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1}),e(Q,{modelValue:l.dialog,"onUpdate:modelValue":i[4]||(i[4]=o=>l.dialog=o),persistent:""},{default:t(()=>[e(f,{style:{width:"300px","max-width":"90vw"}},{default:t(()=>[e(c,{class:"row items-center q-pb-none"},{default:t(()=>[y("div",null,n(l.category.id?"Editar":"Crear")+" categor\xEDa ",1),e(k),h(e(r,{flat:"",dense:"",icon:"close"},null,512),[[C]])]),_:1}),e(c,{class:"q-pt-none"},{default:t(()=>[e(v,{onSubmit:i[3]||(i[3]=o=>l.category.id===void 0?s.storeCategory():s.updateCategory())},{default:t(()=>[e(g,{modelValue:l.category.name,"onUpdate:modelValue":i[1]||(i[1]=o=>l.category.name=o),label:"Nombre",outlined:"",dense:"",rules:[o=>!!o||"Este campo es requerido"]},null,8,["modelValue","rules"]),e(g,{modelValue:l.category.icon,"onUpdate:modelValue":i[2]||(i[2]=o=>l.category.icon=o),label:"Icono",outlined:"",dense:"",rules:[o=>!!o||"Este campo es requerido"]},null,8,["modelValue","rules"]),y("div",E,[h(e(r,{label:"Cancelar",color:"grey-3","text-color":"black","no-caps":"",loading:l.loading},null,8,["loading"]),[[C]]),e(r,{label:l.category.id?"Actualizar":"Crear",color:"primary",class:"q-ml-md",type:"submit","no-caps":"",loading:l.loading},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var L=I(B,[["render",N]]);export{L as default};
