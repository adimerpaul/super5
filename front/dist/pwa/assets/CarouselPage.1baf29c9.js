import{B as y,C as Q,E as i,H as e,S as n,I as t,aM as C,aF as _,J as b,K as p,R as g,G as d,U as f,V as w}from"./index.9edba5f1.js";import{Q as k,a as c}from"./QTable.11f5663d.js";import{Q as V}from"./QImg.222921e7.js";import{Q as v}from"./QTr.2e0db411.js";import{Q as D}from"./QSpace.4e595e69.js";import{Q as B}from"./QForm.6c489b8e.js";import{Q as I}from"./QPage.8e64ec2d.js";import{C as h}from"./ClosePopup.f357f1c9.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.7302da53.js";import"./QSelect.c18c5acd.js";import"./QMenu.037e31f1.js";import"./QItem.eff87168.js";import"./selection.83a0f183.js";import"./format.2cae61da.js";import"./use-fullscreen.f8a2fd6b.js";const S={name:"carouselsPage",data(){return{search:"",columns:[{name:"option",label:"Opciones",align:"center",field:a=>a.id},{name:"id",label:"ID",align:"center",field:a=>a.id},{name:"imagen",label:"Nombre",align:"left",field:a=>a.name}],carousels:[],caroucel:{},dialog:!1,loading:!1}},mounted(){this.loading=!0,this.$axios.get("carousels").then(a=>{this.carousels=a.data}).finally(()=>{this.loading=!1})},methods:{storecarousels(){console.log(this.caroucel),this.loading=!0;const a=new FormData;a.append("file",this.caroucel.imagen),this.$axios.post("carousels",a).then(l=>{this.carousels.push(l.data),this.dialog=!1}).finally(()=>{this.loading=!1})},updatecarousels(){console.log(this.caroucel),this.loading=!0;const a=new FormData;a.append("file",this.caroucel.imagen),this.$axios.post(`carousels/${this.caroucel.id}`,a).then(l=>{const u=this.carousels.findIndex(m=>m.id===l.data.id);this.carousels.splice(u,1,l.data),this.dialog=!1}).finally(()=>{this.loading=!1})},createcarousels(){this.dialog=!0,this.caroucel={name:"",icon:""}},editcarousels(a){this.dialog=!0,this.caroucel={...a}},deletecarousels(a){this.$alert.confirm("\xBFEst\xE1s seguro de eliminar esta categor\xEDa?").onOk(()=>{this.loading=!0,this.$axios.delete(`carousels/${a.id}`).then(()=>{this.carousels=this.carousels.filter(l=>l.id!==a.id)}).finally(()=>{this.loading=!1})})}}},F={class:"text-right"};function N(a,l,u,m,o,r){return y(),Q(I,{class:"q-pa-xs bg-grey-3"},{default:i(()=>[e(g,{class:"q-pa-xs"},{default:i(()=>[e(n,null,{default:i(()=>[e(k,{rows:o.carousels,dense:"","rows-per-page-options":[0],columns:o.columns,filter:o.search,loading:o.loading},{"top-right":i(()=>[e(t,{dense:"",icon:"add_circle_outline",color:"primary",label:"Crear","no-caps":"",loading:o.loading,onClick:r.createcarousels},null,8,["loading","onClick"]),e(C,{modelValue:o.search,"onUpdate:modelValue":l[0]||(l[0]=s=>o.search=s),dense:"",debounce:"300",placeholder:"Buscar...",outlined:""},{append:i(()=>[e(_,{name:"search"})]),_:1},8,["modelValue"])]),body:i(s=>[e(v,{props:s},{default:i(()=>[e(c,{props:s,"auto-width":"",key:"option",style:{padding:"0",margin:"0"}},{default:i(()=>[e(t,{flat:"",dense:"",icon:"edit",onClick:x=>r.editcarousels(s.row),size:"10px"},null,8,["onClick"]),e(t,{flat:"",dense:"",icon:"delete",onClick:x=>r.deletecarousels(s.row),size:"10px"},null,8,["onClick"])]),_:2},1032,["props"]),e(c,{props:s,key:"id"},{default:i(()=>[b(p(s.row.id),1)]),_:2},1032,["props"]),e(c,{props:s,key:"imagen",style:{padding:"0",margin:"0"}},{default:i(()=>[e(V,{src:`${a.$url}../images/${s.row.imagen}`,width:"120px"},null,8,["src"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1}),e(w,{modelValue:o.dialog,"onUpdate:modelValue":l[3]||(l[3]=s=>o.dialog=s),persistent:""},{default:i(()=>[e(g,{style:{width:"450px","max-width":"90vw"}},{default:i(()=>[e(n,{class:"row items-center q-pb-none"},{default:i(()=>[d("div",null,p(o.caroucel.id?"Editar":"Crear")+" categor\xEDa ",1),e(D),f(e(t,{flat:"",dense:"",icon:"close"},null,512),[[h]])]),_:1}),e(n,{class:"q-pt-none"},{default:i(()=>[e(B,{onSubmit:l[2]||(l[2]=s=>o.caroucel.id===void 0?r.storecarousels():r.updatecarousels())},{default:i(()=>[d("input",{type:"file",onChange:l[1]||(l[1]=s=>o.caroucel.imagen=s.target.files[0]),style:{"margin-bottom":"10px"},accept:"image/*"},null,32),d("div",F,[f(e(t,{label:"Cancelar",color:"grey-3","text-color":"black","no-caps":"",loading:o.loading},null,8,["loading"]),[[h]]),e(t,{label:o.caroucel.id?"Actualizar":"Crear",color:"primary",class:"q-ml-md",type:"submit","no-caps":"",loading:o.loading},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var X=q(S,[["render",N]]);export{X as default};
