import{Q as _}from"./QResizeObserver.71c99d37.js";import{c as $,x as C,y,r as w,f as o,w as f,o as O,$ as I,p as b,q as L,z as R,W as N,_ as P}from"./index.9378a5f4.js";var K=$({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:Q,emit:V}){const{proxy:{$q:d}}=L(),e=C(R,y);if(e===y)return console.error("QHeader needs to be child of QLayout"),y;const n=w(parseInt(a.heightHint,10)),l=w(!0),g=o(()=>a.reveal===!0||e.view.value.indexOf("H")!==-1||d.platform.is.ios&&e.isContainer.value===!0),h=o(()=>{if(a.modelValue!==!0)return 0;if(g.value===!0)return l.value===!0?n.value:0;const t=n.value-e.scroll.value.position;return t>0?t:0}),q=o(()=>a.modelValue!==!0||g.value===!0&&l.value!==!0),z=o(()=>a.modelValue===!0&&q.value===!0&&a.reveal===!0),x=o(()=>"q-header q-layout__section--marginal "+(g.value===!0?"fixed":"absolute")+"-top"+(a.bordered===!0?" q-header--bordered":"")+(q.value===!0?" q-header--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus":"")),B=o(()=>{const t=e.rows.value.top,c={};return t[0]==="l"&&e.left.space===!0&&(c[d.lang.rtl===!0?"right":"left"]=`${e.left.size}px`),t[2]==="r"&&e.right.space===!0&&(c[d.lang.rtl===!0?"left":"right"]=`${e.right.size}px`),c});function r(t,c){e.update("header",t,c)}function m(t,c){t.value!==c&&(t.value=c)}function i({height:t}){m(n,t),r("size",t)}function v(t){z.value===!0&&m(l,!0),V("focusin",t)}f(()=>a.modelValue,t=>{r("space",t),m(l,!0),e.animate()}),f(h,t=>{r("offset",t)}),f(()=>a.reveal,t=>{t===!1&&m(l,a.modelValue)}),f(l,t=>{e.animate(),V("reveal",t)}),f(e.scroll,t=>{a.reveal===!0&&m(l,t.direction==="up"||t.position<=a.revealOffset||t.position-t.inflectionPoint<100)});const H={};return e.instances.header=H,a.modelValue===!0&&r("size",n.value),r("space",a.modelValue),r("offset",h.value),O(()=>{e.instances.header===H&&(e.instances.header=void 0,r("size",0),r("offset",0),r("space",!1))}),()=>{const t=I(Q.default,[]);return a.elevated===!0&&t.push(b("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(b(_,{debounce:0,onResize:i})),b("header",{class:x.value,style:B.value,onFocusin:v},t)}}}),M=$({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:Q,emit:V}){const{proxy:{$q:d}}=L(),e=C(R,y);if(e===y)return console.error("QFooter needs to be child of QLayout"),y;const n=w(parseInt(a.heightHint,10)),l=w(!0),g=w(N.value===!0||e.isContainer.value===!0?0:window.innerHeight),h=o(()=>a.reveal===!0||e.view.value.indexOf("F")!==-1||d.platform.is.ios&&e.isContainer.value===!0),q=o(()=>e.isContainer.value===!0?e.containerHeight.value:g.value),z=o(()=>{if(a.modelValue!==!0)return 0;if(h.value===!0)return l.value===!0?n.value:0;const u=e.scroll.value.position+q.value+n.value-e.height.value;return u>0?u:0}),x=o(()=>a.modelValue!==!0||h.value===!0&&l.value!==!0),B=o(()=>a.modelValue===!0&&x.value===!0&&a.reveal===!0),r=o(()=>"q-footer q-layout__section--marginal "+(h.value===!0?"fixed":"absolute")+"-bottom"+(a.bordered===!0?" q-footer--bordered":"")+(x.value===!0?" q-footer--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus"+(h.value!==!0?" hidden":""):"")),m=o(()=>{const u=e.rows.value.bottom,s={};return u[0]==="l"&&e.left.space===!0&&(s[d.lang.rtl===!0?"right":"left"]=`${e.left.size}px`),u[2]==="r"&&e.right.space===!0&&(s[d.lang.rtl===!0?"left":"right"]=`${e.right.size}px`),s});function i(u,s){e.update("footer",u,s)}function v(u,s){u.value!==s&&(u.value=s)}function H({height:u}){v(n,u),i("size",u)}function t(){if(a.reveal!==!0)return;const{direction:u,position:s,inflectionPoint:S}=e.scroll.value;v(l,u==="up"||s-S<100||e.height.value-q.value-s-n.value<300)}function c(u){B.value===!0&&v(l,!0),V("focusin",u)}f(()=>a.modelValue,u=>{i("space",u),v(l,!0),e.animate()}),f(z,u=>{i("offset",u)}),f(()=>a.reveal,u=>{u===!1&&v(l,a.modelValue)}),f(l,u=>{e.animate(),V("reveal",u)}),f([n,e.scroll,e.height],t),f(()=>d.screen.height,u=>{e.isContainer.value!==!0&&v(g,u)});const F={};return e.instances.footer=F,a.modelValue===!0&&i("size",n.value),i("space",a.modelValue),i("offset",z.value),O(()=>{e.instances.footer===F&&(e.instances.footer=void 0,i("size",0),i("offset",0),i("space",!1))}),()=>{const u=P(Q.default,[b(_,{debounce:0,onResize:H})]);return a.elevated===!0&&u.push(b("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),b("footer",{class:r.value,style:m.value,onFocusin:c},u)}}});export{K as Q,M as a};
