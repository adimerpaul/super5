import{B as C,C as x,E as l,H as e,S as n,I as i,aM as c,aF as _,J as m,K as d,R as p,G as b,U as f,V as Q}from"./index.9edba5f1.js";import{Q as S,a as u}from"./QTable.11f5663d.js";import{Q as w}from"./QTr.2e0db411.js";import{Q as k}from"./QSpace.4e595e69.js";import{Q as V}from"./QForm.6c489b8e.js";import{Q as v}from"./QPage.8e64ec2d.js";import{C as h}from"./ClosePopup.f357f1c9.js";import{_ as q}from"./plugin-vue_export-helper.21dcd24c.js";import"./QList.7302da53.js";import"./QSelect.c18c5acd.js";import"./QMenu.037e31f1.js";import"./QItem.eff87168.js";import"./selection.83a0f183.js";import"./format.2cae61da.js";import"./use-fullscreen.f8a2fd6b.js";const B={name:"SubCategoryPage",data(){return{search:"",columns:[{name:"option",label:"Opciones",align:"center",field:a=>a.id},{name:"id",label:"ID",align:"center",field:a=>a.id},{name:"name",label:"Nombre",align:"left",field:a=>a.name}],subCategories:[],subcategory:{},dialog:!1,loading:!1}},mounted(){this.loading=!0,this.$axios.get("subCategories").then(a=>{this.subCategories=a.data}).finally(()=>{this.loading=!1})},methods:{storeSubCategory(){console.log(this.subcategory),this.loading=!0,this.$axios.post("subCategories",this.subcategory).then(a=>{this.subCategories.push(a.data),this.dialog=!1}).finally(()=>{this.loading=!1})},updateSubCategory(){console.log(this.subcategory),this.loading=!0,this.$axios.put(`subCategories/${this.subcategory.id}`,this.subcategory).then(a=>{const s=this.subCategories.findIndex(g=>g.id===a.data.id);this.subCategories.splice(s,1,a.data),this.dialog=!1}).finally(()=>{this.loading=!1})},createSubCategory(){this.dialog=!0,this.subcategory={name:"",icon:""}},editSubCategory(a){this.dialog=!0,this.subcategory={...a}},deleteSubCategory(a){this.$alert.confirm("\xBFEst\xE1s seguro de eliminar esta categor\xEDa?").onOk(()=>{this.loading=!0,this.$axios.delete(`subCategories/${a.id}`).then(()=>{this.subCategories=this.subCategories.filter(s=>s.id!==a.id)}).finally(()=>{this.loading=!1})})}}},I={class:"text-right"};function N(a,s,g,D,t,r){return C(),x(v,{class:"q-pa-xs bg-grey-3"},{default:l(()=>[e(p,{class:"q-pa-xs"},{default:l(()=>[e(n,null,{default:l(()=>[e(S,{rows:t.subCategories,dense:"","rows-per-page-options":[0],columns:t.columns,filter:t.search,loading:t.loading},{"top-right":l(()=>[e(i,{dense:"",icon:"add_circle_outline",color:"primary",label:"Crear","no-caps":"",loading:t.loading,onClick:r.createSubCategory},null,8,["loading","onClick"]),e(c,{modelValue:t.search,"onUpdate:modelValue":s[0]||(s[0]=o=>t.search=o),dense:"",debounce:"300",placeholder:"Buscar...",outlined:""},{append:l(()=>[e(_,{name:"search"})]),_:1},8,["modelValue"])]),body:l(o=>[e(w,{props:o},{default:l(()=>[e(u,{props:o,"auto-width":"",key:"option",style:{padding:"0",margin:"0"}},{default:l(()=>[e(i,{flat:"",dense:"",icon:"edit",onClick:y=>r.editSubCategory(o.row),size:"10px"},null,8,["onClick"]),e(i,{flat:"",dense:"",icon:"delete",onClick:y=>r.deleteSubCategory(o.row),size:"10px"},null,8,["onClick"])]),_:2},1032,["props"]),e(u,{props:o,key:"id"},{default:l(()=>[m(d(o.row.id),1)]),_:2},1032,["props"]),e(u,{props:o,key:"name"},{default:l(()=>[m(d(o.row.name),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","loading"])]),_:1})]),_:1}),e(Q,{modelValue:t.dialog,"onUpdate:modelValue":s[3]||(s[3]=o=>t.dialog=o),persistent:""},{default:l(()=>[e(p,{style:{width:"300px","max-width":"90vw"}},{default:l(()=>[e(n,{class:"row items-center q-pb-none"},{default:l(()=>[b("div",null,d(t.subcategory.id?"Editar":"Crear")+" categor\xEDa ",1),e(k),f(e(i,{flat:"",dense:"",icon:"close"},null,512),[[h]])]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(V,{onSubmit:s[2]||(s[2]=o=>t.subcategory.id===void 0?r.storeSubCategory():r.updateSubCategory())},{default:l(()=>[e(c,{modelValue:t.subcategory.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.subcategory.name=o),label:"Nombre",outlined:"",dense:"",rules:[o=>!!o||"Este campo es requerido"]},null,8,["modelValue","rules"]),b("div",I,[f(e(i,{label:"Cancelar",color:"grey-3","text-color":"black","no-caps":"",loading:t.loading},null,8,["loading"]),[[h]]),e(i,{label:t.subcategory.id?"Actualizar":"Crear",color:"primary",class:"q-ml-md",type:"submit","no-caps":"",loading:t.loading},null,8,["label","loading"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var L=q(B,[["render",N]]);export{L as default};
